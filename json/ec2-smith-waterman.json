{
	"input_name": "small.fasta",
	"model": "ec2",
	"iterations": 10,
	"folder": "ssw-ec2",
	"region": "us-west-2",
	"tag": "smith-waterman",
	"storage_class": "STANDARD",
	"timeout": 300,
	"num_bins": 300,
	"num_output": 300,
	"log": "maccoss-ec2",
	"bucket": "maccoss-ec2",
	"account": 999145429263,
	"role": "service-role/lambdaFullAccessRole",
	"stats": true,
	"setup": true,
	"ec2": {
		"application": "ssw",
		"ami": "ami-09908e282013b16a4",
		"default_ami": "ami-51537029",
		"key": "maccoss",
		"security": "sg-4ea90530",
		"subnet": "subnet-03990a59",
		"timeout": 20,
		"type": "t2.medium",
		"wait_for_tests": false,
		"use_ami": true
	},
	"dependencies": {
		"common": [
			"formats/iterator.py",
			"formats/pivot.py",
			"util.py"
		],
		"formats": {
			"blast": [
				"formats/blast.py"
			]
		}
	},
	"functions": {
		"map-fasta": {
			"file": "map",
			"memory_size": 1024
		},
		"smith-waterman": {
			"file": "application",
			"application": "ssw",
			"memory_size": 1024,
			"program_bucket": "ssw-program"
		},
		"find-blast-pivots": {
			"file": "pivot_file",
			"format": "blast",
			"memory_size": 1024
		},
		"combine-blast-pivot-files": {
			"file": "combine_files",
			"format": "pivot",
			"memory_size": 1024
		}, 
		"map-blast": {
			"file": "map",
			"memory_size": 1024
		},
		"sort-blast-chunk": {
			"file": "sort",
			"format": "blast",
			"memory_size": 1024
		}, 
		"combine-blast-files": {
			"file": "combine_files",
			"format": "blast",
			"memory_size": 1024
		}
	},
	"pipeline": [{
		"name": "map-fasta",
		"map_bucket": "ssw-database",
		"input_key_value": "key",
		"bucket_key_value": "target", 
		"output_function": "smith-waterman",
		"directories": false,
		"ranges": false
	},
	{
		"name": "smith-waterman"
	},
	{
		"name": "find-blast-pivots",
		"batch_size": 4000,
		"chunk_size": 1000000,
		"identifier": "score",
		"sort": true
	},
	{
		"name": "combine-blast-pivot-files",
		"sort": false
	},
	{
		"name": "map-blast",
		"map_bucket": "maccoss-ssw",
		"map_hucket_key_prefix": "2",
		"input_key_value": "pivots",
		"bucket_key_value": "key", 
		"output_function": "sort-blast-chunk",
		"ranges": true
	},
	{
		"name": "sort-blast-chunk",
		"batch_size": 4000,
		"chunk_size": 100000,
		"identifier": "score"
	},
	{
		"name": "combine-blast-files",
		"batch_size": 100,
		"chunk_size": 5000,
		"identifier": "score",
		"sort": true
	}]
}
